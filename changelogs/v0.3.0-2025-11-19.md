# Release Changelog - v0.3.0 - November 19, 2025

---

## üöÄ Features

### Map & Geospatial
- **Implement runtime layer snapshot management and update mechanism**
  - Enhanced layer management with runtime snapshot capabilities
  - Improved layer state synchronization

- **Add custom search control and integrate with map canvas**
  - Custom geocoding search functionality
  - Seamless integration with map interface

- **Implement map features including canvas, toolbar, search box, and geocoding functionality**
  - Complete map interaction suite
  - Drawing tools and feature manipulation

- **Enhance LayersPanel with close button and sync layer visibility to map**
  - Improved layer panel UX
  - Real-time visibility synchronization

### Chat & Messaging
- **Implement useAnchoredToolParts hook for managing tool invocation rendering**
  - Better tool call display management
  - Improved chat message rendering

- **Enhance message hydration logic and state management in chat components**
  - More robust message loading from database
  - Better state consistency

- **Enhance chat handling with improved error management and message persistence**
  - Improved error handling throughout chat flow
  - Enhanced message saving reliability

### Tools & Services
- **Add tooling services for database and map layer management**
  - Introduced `BrowserWindowProvider` for window management
  - Implemented `ConnectionCredentialInjector` for secure DB connections
  - Created `MapLayerTracker` for comprehensive layer tracking
  - Registered built-in tools for visualization, map layers, databases, and knowledge base
  - Enhanced PostgreSQL configuration with async operations

### LLM Providers
- **Implement Ollama provider with complete request and response handling**
  - Full Ollama integration with streaming support
  - Message conversion and tool preparation
  - Response and stream processing
  - Tool error handling support

### UI Components
- **Update model configurations and add confirmation dialog for chat deletion**
  - Improved model selection interface
  - Safety confirmation for destructive actions

- **Enhance chart display with scatter chart support**
  - Added scatter plot visualization capabilities

---

## üêõ Bug Fixes

### UI & Styling
- **Update class names for consistent styling and improve layout responsiveness**
  - Better responsive behavior across screen sizes
  - Consistent styling patterns

- **Adjust sidebar width from 52 to 48 for better layout consistency**
  - Optimized sidebar dimensions
  - Improved overall layout balance

- **Update chat input styles and add custom background color variable**
  - Better visual consistency
  - Theme-aware input styling

### Data Management
- **Tag unassigned imported layers with current chat ID upon availability**
  - Proper layer-chat association
  - Prevents orphaned layers

- **Improve message hydration logic to prevent overwriting in-memory state with DB snapshots**
  - Better state reconciliation
  - Prevents data loss during hydration

### Dependencies & Configuration
- **Update package versions for @mapbox/mapbox-gl-draw and @types/mapbox__mapbox-gl-draw**
  - Latest compatible versions
  - Improved type definitions

- **Update SSL configuration to handle unauthorized certificate rejection in PostgreSQL service**
  - Better SSL handling for database connections
  - Configurable certificate validation

- **Update import paths for PostgreSQLConfig and AddMapFeaturePayload types**
  - Fixed broken imports
  - Better type organization

- **Stabilize hook order by separating loading state checks in useMentionData**
  - Prevents React hooks violations
  - More stable component behavior

---

## ‚ôªÔ∏è Refactoring

### Code Organization
- **Rename "Tools" NavGroup to "System" and adjust button organization**
  - Better semantic naming
  - Clearer navigation structure

- **Remove plugin-related code and operations from DBService and IPC types**
  - Cleaner architecture
  - Removed unused functionality

- **Extract useEffects into custom hooks in chat interface**
  - `use-reasoning-notification.ts`: Reasoning event dispatching
  - `use-message-persistence.ts`: Message saving and DB hydration
  - `use-scroll-reset.ts`: Chat navigation scroll management
  - Better code organization and reusability

- **Reorganize header and action button layout in AgentsPage component**
  - Improved component structure
  - Better maintainability

- **Improve type safety and reset logic for chat navigation**
  - Stronger type checking
  - More predictable navigation behavior

- **Enhance message rendering logic to support tool invocation anchoring and text slicing**
  - Better tool call positioning
  - Improved message part handling

### Provider Management
- **Remove LM Studio provider integration** (November 18)
  - Removed LM Studio provider from factory and settings
  - Cleaned up related UI components and state management
  - Removed associated assets and constants

---

## üõ†Ô∏è Chores

- **Update licensing information to GNU General Public License v3.0**
  - Updated license documentation

- **Add docs/ directory to .gitignore** (November 18)
  - Prevent documentation build artifacts from being committed

- **Update dependencies and add glob override** (November 18)
  - Added glob package override to ^11.0.0
  - Removed @types/pdfjs-dist dependency
  - Updated electron-builder from ^25.1.8 to ^26.2.0

---

## üìä Statistics

- **Total Commits**: 29
- **Files Changed**: Multiple across main and renderer processes
- **Key Areas**: Map functionality, Chat interface, LLM providers, UI/UX improvements

---

## üîç Technical Notes

### Architecture Improvements
- Enhanced service layer with better tool management
- Improved state management patterns in chat components
- Better separation of concerns with custom hooks
- More robust error handling throughout the application

### Provider Updates
- Complete Ollama provider implementation
- Removal of LM Studio provider (maintenance decision)
- Better streaming support across providers

### UI/UX Enhancements
- Comprehensive map interaction suite
- Better layer management capabilities
- Improved chat interface with tool call anchoring
- More responsive layouts and styling

---

_Date: November 19, 2025_
